<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Chirurgia</title>

    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f0f0f0;
        }

        .question-container {
            display: none;
            background: white;
            padding: 80px;
            border-radius: 10px;
            max-width: 1000px;
            margin: auto;
            box-shadow: 0 0 30px rgba(0,0,0,0.15);
        }

            .question-container.active {
                display: block;
            }

        iframe, img {
            width: 100%;
            max-width: 1200px;
            height: 800px;
            border: none;
            margin-bottom: 15px;
        }

        button {
            margin-top: 15px;
            padding: 10px 20px;
            font-size: 16px;
            border: none;
            background: #007bff;
            color: white;
            border-radius: 6px;
            cursor: pointer;
        }

        /* Dashboard */
        #result {
            text-align: center;
        }

        #scoreBox {
            background: #ffffff;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            box-shadow: 0 0 10px rgba(0,0,0,0.15);
            text-align: left;
        }

        .correct {
            color: green;
            font-weight: bold;
        }

        .wrong {
            color: red;
            font-weight: bold;
        }
    </style>
</head>
<body>

    <h2>Quiz di Chirurgia</h2>

    <!-- =================== DOMANDA 1 =================== -->
    <div class="question-container active" id="q1">
        <h3>1) Che intervento è rappresentato in questo video 3D?</h3>

        <div class="sketchfab-embed-wrapper">
            <iframe title="Cataract Surgery Animation"
                    allowfullscreen
                    src="https://sketchfab.com/models/375ec3c07a0f42108da9334b6f9c1f85/embed?autostart=1">
            </iframe>

        </div>

        <label><input type="checkbox" value="Vitrectomia" name="q1"> Vitrectomia</label><br>
        <label><input type="checkbox" value="Facoemulsificazione" name="q1"> Facoemulsificazione</label><br>
        <label><input type="checkbox" value="Trapianto di cornea" name="q1"> Trapianto di cornea</label><br>
        <label><input type="checkbox" value="Chirurgia refrattiva" name="q1"> Chirurgia refrattiva</label>

        <br><button onclick="nextQuestion(1)">Continua</button>
    </div>

    <!-- =================== DOMANDA 2 =================== -->
    <div class="question-container" id="q2">
        <h3>2) Che intervento è rappresentato in questa Immagine?</h3>

        <div class="sketchfab-embed-wrapper">
            <iframe title="Vitrectomy - Step 1"
                    allowfullscreen
                    src="https://sketchfab.com/models/1d88716a182c40c6aa6d387cbb48f37a/embed">
            </iframe>
        </div>

        <label><input type="checkbox" value="Vitrectomia" name="q2"> Vitrectomia</label><br>
        <label><input type="checkbox" value="Facoemulsificazione" name="q2"> Facoemulsificazione</label><br>
        <label><input type="checkbox" value="Trabeculectomia" name="q2"> Trabeculectomia</label><br>
        <label><input type="checkbox" value="IOL secondaria" name="q2"> Impianto IOL secondaria</label>

        <br><button onclick="nextQuestion(2)">Continua</button>
    </div>

    <!-- =================== DOMANDA 3 (IMMAGINE) =================== -->
    <div class="question-container" id="q3">
        <h3>3) Lo strumentario in questione a quale intervento si riferisce?</h3>

        <img src="Facoservitore.png" alt="Strumentario Faco">

        <label><input type="checkbox" value="Vitrectomia" name="q3"> Vitrectomia</label><br>
        <label><input type="checkbox" value="Cheratoplastica" name="q3"> Cheratoplastica</label><br>
        <label><input type="checkbox" value="Facoemulsificazione" name="q3"> Facoemulsificazione</label><br>
        <label><input type="checkbox" value="Valvola Ahmed" name="q3"> Impianto valvola di Ahmed</label>

        <br><button onclick="finishQuiz()">Termina Quiz</button>
    </div>

    <!-- =================== DASHBOARD FINALE =================== -->
    <div class="question-container" id="result">
        <h3>Quiz completato!</h3>
        <h2 id="finalScore"></h2>

        <div id="scoreBox"></div>
    </div>

    <script>const correctAnswers = {
            q1: "Facoemulsificazione",
            q2: "Vitrectomia",
            q3: "Facoemulsificazione"
        };

        const userAnswers = {};

        function nextQuestion(n) {
            saveAnswer(n);
            document.getElementById("q" + n).classList.remove("active");
            document.getElementById("q" + (n + 1)).classList.add("active");
        }

        function saveAnswer(n) {
            const selected = document.querySelector('input[name="q' + n + '"]:checked');
            userAnswers["q" + n] = selected ? selected.value : "Nessuna risposta";
        }

        function finishQuiz() {
            saveAnswer(3);

            document.getElementById("q3").classList.remove("active");
            document.getElementById("result").classList.add("active");

            let score = 0;
            let total = 3;

            let resultsHTML = "";

            for (let q in correctAnswers) {
                const user = userAnswers[q];
                const correct = correctAnswers[q];

                if (user === correct) score++;

                resultsHTML += `
                <p>
                    <strong>${q.toUpperCase()}:</strong>
                    <span class="${user === correct ? 'correct' : 'wrong'}">
                        ${user === correct ? "✔ Corretto" : "✘ Errato"}
                    </span><br>
                    <small>Risposta data: ${user}</small><br>
                    <small>Risposta corretta: ${correct}</small>
                </p>
                <hr>
            `;
            }

            document.getElementById("finalScore").innerText =
                `Punteggio: ${score} / ${total}`;

            document.getElementById("scoreBox").innerHTML = resultsHTML;
        }</script>

</body>
</html>
